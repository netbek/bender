/*
 * bender
 * 
 * @author Hein Bekker <hein@netbek.co.za>
 * @copyright (c) 2015 Hein Bekker
 * @license http://www.gnu.org/licenses/agpl-3.0.txt AGPLv3
 */
!function(a,b){function c(){this.ratios=[];for(var a,b=[[10,16],[10,15],[9,16],[3,4]],c=0,d=b.length;d>c;c++)a=b[c],this.ratios.push({width:a[0],height:a[1],ratio:a[0]/a[1],name:a[0]+":"+a[1]}),a[0]!==a[1]&&this.ratios.push({width:a[1],height:a[0],ratio:a[1]/a[0],name:a[1]+":"+a[0]})}if(!a.bender){c.prototype.getRatioName=function(a,c){for(var d,e=Number(a)/Number(c),f=0,g=this.ratios.length;g>f;f++)if(d=this.ratios[f],d.ratio===e)return d.name;return b},c.prototype.init=function(a){a=jQuery.extend({},{sitemapUrl:b,sitemapBaseUrl:b,baseUrl:"",screens:[]},a);for(var c,e,f,g=jQuery("#frames > ul"),h="",i=0,j=a.screens.length;j>i;i++)c=a.screens[i],e=c.split("-"),f=d.getRatioName(e[0],e[1]),h+="<li><p>"+e[0]+" x "+e[1]+(f?", "+f:"")+'</p><iframe class="f f-'+e[0]+"-"+e[1]+'"></iframe></li>';g.append(h),jQuery.ajax({cache:!1,method:"GET",dataType:"xml",url:a.sitemapUrl,error:function(){alert("Could not load sitemap")},success:function(c){var d=jQuery("iframe"),e=jQuery("#menu"),f=jQuery("<ul />"),g={};jQuery(c).find("url").each(function(){var b=jQuery(this).find("loc").text();if(b.substr(0,a.sitemapBaseUrl.length)===a.sitemapBaseUrl){var c=b=b.substr(a.sitemapBaseUrl.length);""===c&&(c="/"),b=a.baseUrl+b,g[b]=c}});var h,i,j,k=[];for(h in g)g.hasOwnProperty(h)&&k.push(h);for(k.sort(),j=k.length,i=0;j>i;i++){h=k[i],a.firstUrl===b&&(a.firstUrl=h);var l=jQuery('<a href="'+h+'">'+g[h]+"</a>").on("click",function(){return d.attr("src",jQuery(this).attr("href")),!1}),m=jQuery("<li />");m.append(l),f.append(m)}jQuery('a[href="#"]',e).on("click",function(){return!1}),j&&(jQuery("li.sitemap",e).append(f),d.attr("src",a.firstUrl)),e.removeClass("hidden").superfish({delay:100,speed:100})}})};var d=new c;a.bender=d}}(this),function(a){var b=setInterval(function(){a.bender&&a.benderConfig&&a.jQuery&&(clearInterval(b),b=null,a.bender.init(a.benderConfig))})}(this);